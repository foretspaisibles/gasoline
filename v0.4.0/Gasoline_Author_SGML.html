<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Gasoline_Plain_Message.html">
<link rel="next" href="Gasoline_Author_HTML.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Gasoline_Unicode" rel="Chapter" href="Gasoline_Unicode.html">
<link title="Gasoline_SysExits" rel="Chapter" href="Gasoline_SysExits.html">
<link title="Gasoline_Generic_Definition" rel="Chapter" href="Gasoline_Generic_Definition.html">
<link title="Gasoline_Generic_Asset" rel="Chapter" href="Gasoline_Generic_Asset.html">
<link title="Gasoline_Generic_Application" rel="Chapter" href="Gasoline_Generic_Application.html">
<link title="Gasoline_Plain_Definition" rel="Chapter" href="Gasoline_Plain_Definition.html">
<link title="Gasoline_Plain_Application" rel="Chapter" href="Gasoline_Plain_Application.html">
<link title="Gasoline_Plain_Filter" rel="Chapter" href="Gasoline_Plain_Filter.html">
<link title="Gasoline_Plain_UserTool" rel="Chapter" href="Gasoline_Plain_UserTool.html">
<link title="Gasoline_Plain_SecureTool" rel="Chapter" href="Gasoline_Plain_SecureTool.html">
<link title="Gasoline_Plain_Daemon" rel="Chapter" href="Gasoline_Plain_Daemon.html">
<link title="Gasoline_Generic_Message" rel="Chapter" href="Gasoline_Generic_Message.html">
<link title="Gasoline_Generic_Diagnostic" rel="Chapter" href="Gasoline_Generic_Diagnostic.html">
<link title="Gasoline_Plain_Message" rel="Chapter" href="Gasoline_Plain_Message.html">
<link title="Gasoline_Author_SGML" rel="Chapter" href="Gasoline_Author_SGML.html">
<link title="Gasoline_Author_HTML" rel="Chapter" href="Gasoline_Author_HTML.html">
<link title="Gasoline_LoremIpsum" rel="Chapter" href="Gasoline_LoremIpsum.html"><link title="Text occuring in snippets" rel="Section" href="#2_Textoccuringinsnippets">
<link title="Pasting snippets" rel="Section" href="#2_Pastingsnippets">
<link title="Pasting snippets" rel="Section" href="#2_Pastingsnippets">
<link title="Factory" rel="Section" href="#2_Factory">
<title>Gasoline library : Gasoline_Author_SGML</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Gasoline_Plain_Message.html" title="Gasoline_Plain_Message">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="Gasoline_Author_HTML.html" title="Gasoline_Author_HTML">Next</a>
</div>
<h1>Module <a href="type_Gasoline_Author_SGML.html">Gasoline_Author_SGML</a></h1>

<pre><span class="keyword">module</span> Gasoline_Author_SGML: <code class="code">sig</code> <a href="Gasoline_Author_SGML.html">..</a> <code class="code">end</code></pre><div class="info module top">
Simple writer for SGML files
<p>

We define rudimentary facilities to assemble SGML files. These facilities are
organised under the notion of <i>snippet</i>. A snippet represents a
well-balanced fragment of a hypothetical SGML document (the document being
assembled). Once they are created, snippets can be pasted together to build
larger snippets. Ultimately, the final snippet is rendered in a buffer,
a string, or output on a channel stream.<br>
</div>
<hr width="100%">
<br>
<h2 id="2_Textoccuringinsnippets">Text occuring in snippets</h2>
<p>

The text occuring in document snippets comes in several flavours. All of these
are unicode strings, but they differ in the way they are used.<br>

<pre><span id="TYPEcdata"><span class="keyword">type</span> <code class="type"></code>cdata</span> = <code class="type"><a href="Gasoline_Unicode.html#TYPEustring">Gasoline_Unicode.ustring</a></code> </pre>
<div class="info ">
The type of <i>character data</i>. This kind of data is pasted into the
output without further processing. This type is typically used for giving
titles, identifiers, etc. to elements.<br>
</div>


<pre><span id="TYPEpcdata"><span class="keyword">type</span> <code class="type"></code>pcdata</span> = <code class="type"><a href="Gasoline_Unicode.html#TYPEustring">Gasoline_Unicode.ustring</a></code> </pre>
<div class="info ">
The type of <i>parsed character data</i>. This kind of data is further
processed before pasting, in particulat SGML reserved characters are
escaped.<br>
</div>


<pre><span id="TYPEnmtoken"><span class="keyword">type</span> <code class="type"></code>nmtoken</span> = <code class="type">string</code> </pre>
<div class="info ">
The type of <i>name tokens</i>. This kind of data is used to labele elements
and keys of their attributes.<br>
</div>


<pre><span id="VALescape"><span class="keyword">val</span> escape</span> : <code class="type"><a href="Gasoline_Author_SGML.html#TYPEpcdata">pcdata</a> -> <a href="Gasoline_Author_SGML.html#TYPEcdata">cdata</a></code></pre><div class="info ">
<code class="code">escape s</code> returns an escaped form for <code class="code">s</code>, ready to be pasted in the
final document .<br>
</div>

<pre><span id="TYPEsnippet"><span class="keyword">type</span> <code class="type"></code>snippet</span> </pre>
<div class="info ">
The type of <i>snippets</i>. A snippet can be a piece of text or an element,
as described below.<br>
</div>


<pre><span id="VALcdata"><span class="keyword">val</span> cdata</span> : <code class="type"><a href="Gasoline_Author_SGML.html#TYPEcdata">cdata</a> -> <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a></code></pre><div class="info ">
Create a simple snippet containing free character data.<br>
</div>

<pre><span id="VALpcdata"><span class="keyword">val</span> pcdata</span> : <code class="type"><a href="Gasoline_Author_SGML.html#TYPEpcdata">pcdata</a> -> <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a></code></pre><div class="info ">
Create a simple snippet containing parsed character data.<br>
</div>

<pre><span id="TYPEelement"><span class="keyword">type</span> <code class="type"></code>element</span> </pre>
<div class="info ">
The type of <i>elements</i>. Elements have a name, a list of attributes and a
content. The empty field tells the renderer wether the closing tag may be
omitted and the block field is a rendering hint distinguishing block level
elements of text levels. Note that this vision of SGML elements is rather
approximative!<br>
</div>


<pre><span id="VALelement"><span class="keyword">val</span> element</span> : <code class="type"><a href="Gasoline_Author_SGML.html#TYPEnmtoken">nmtoken</a> -><br>       ?empty:bool -><br>       ?block:bool -><br>       ?attr:(<a href="Gasoline_Author_SGML.html#TYPEnmtoken">nmtoken</a> * <a href="Gasoline_Author_SGML.html#TYPEcdata">cdata</a>) list -><br>       <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a> list -> <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a></code></pre><div class="info ">
<code class="code">element name content</code> create a complex snippet, consisting of an element
named <code class="code">name</code> containing the snippets specified in <code class="code">content</code>.<br>
<b>Raises</b> <code>Invalid_arg</code> if <code class="code">name</code> is the empty string.<br>
</div>
<br>
<h2 id="2_Pastingsnippets">Pasting snippets</h2><br>
<br>
<h2 id="2_Pastingsnippets">Pasting snippets</h2><br>
<br>
The formatting functions below that require an encoding will fail
if the given encoding is not able to represent all the characters
found in the document being formatted.<br>

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>
<div class="info ">
The type of <i>final documents</i>.<br>
</div>


<pre><span id="VALmake"><span class="keyword">val</span> make</span> : <code class="type">?declaration:<a href="Gasoline_Author_SGML.html#TYPEnmtoken">nmtoken</a> -><br>       ?dtd:<a href="Gasoline_Author_SGML.html#TYPEnmtoken">nmtoken</a> -><br>       <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a> list -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a></code></pre><div class="info ">
<code class="code">make content</code> create a document snippet with the specified
content. It is possible to preprend a declaration and a
DTD identifier to the resulting document.<br>
</div>

<pre><span id="VALformat"><span class="keyword">val</span> format</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -><br>       Format.formatter -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
<code class="code">format f d</code> format document <code class="code">d</code> to formatter <code class="code">f</code>.<br>
</div>

<pre><span id="VALadd_to_buffer"><span class="keyword">val</span> add_to_buffer</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -><br>       Buffer.t -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Format a document to an existing unicode buffer.<br>
</div>

<pre><span id="VALto_buffer"><span class="keyword">val</span> to_buffer</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> Buffer.t</code></pre><div class="info ">
Format a document to a fresh new buffer.<br>
</div>

<pre><span id="VALto_string"><span class="keyword">val</span> to_string</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Format a document to a fresh new string.<br>
</div>

<pre><span id="VALoutput"><span class="keyword">val</span> output</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -><br>       Pervasives.out_channel -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Write the document to the output channel.<br>
</div>

<pre><span id="VALprint"><span class="keyword">val</span> print</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Write the document to the standard output. This uses the Gasoline_Unicode's module
presentation of standard output, so encoding can be set using
<code class="code">Gasoline_Unicode.Uchannel</code> module.<br>
</div>

<pre><span id="VALwrite"><span class="keyword">val</span> write</span> : <code class="type">?enc:<a href="Gasoline_Unicode.Encoding.html#TYPEt">Gasoline_Unicode.Encoding.t</a> -> string -> <a href="Gasoline_Author_SGML.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Turn the document into an encoded file. This may fail if the required
encoding does not support all of the characters occuring in the document.<br>
</div>
<br>
<h2 id="2_Factory">Factory</h2>
<p>

We provide a few services in order to simplify the elaboration of complex
documents.<br>

<pre><span id="VALconcat"><span class="keyword">val</span> concat</span> : <code class="type"><a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a> list list -> <a href="Gasoline_Author_SGML.html#TYPEsnippet">snippet</a> list</code></pre><div class="info ">
This is an avatar of <code class="code">List.concat</code>. It is useful when preparing the
content of an element.<br>
</div>

<pre><span id="VALoutcome"><span class="keyword">val</span> outcome</span> : <code class="type">(('a -> 'b) * 'a option) list -> 'b list</code></pre><div class="info ">
<code class="code">outcome [(f1, opt1); ...]</code> return the list deduced from its argument by:
filtering out pairs having <code class="code">None</code> as second member, and replacing <code class="code">(f,Some v)</code>
by <code class="code">f v</code>.
<p>

This procedure may be useful when writing a function with a big number of
optional arguments, describing optional parts of a document.<br>
</div>
</body></html>